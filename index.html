<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TurboTales 3D Racing</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
      text-align: center;
    }
    h1 { margin-top: 20px; }
    .menu, #gameCanvas { display: none; }
    .active { display: block; }
    .btn {
      padding: 14px 30px;
      margin: 10px;
      font-size: 20px;
      background: #444;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .section { margin-top: 30px; }
    img.social {
      width: 50px;
      margin: 10px;
    }
    .grid {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .card {
      background: #222;
      padding: 10px;
      border-radius: 10px;
      width: 140px;
    }
    .card img {
      width: 100%;
      border-radius: 8px;
    }
    .card p {
      margin-top: 8px;
      font-size: 14px;
    }
    #message {
      margin-top: 10px;
      color: lime;
      font-weight: bold;
    }
    canvas {
      background: #222;
      display: block;
      margin: auto;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div id="mainMenu" class="menu active">
    <h1>🏁 TurboTales 3D Racing</h1>
    <button class="btn" onclick="showMenu('cars')">🚗 Cars</button>
    <button class="btn" onclick="showMenu('tracks')">🛣️ Tracks</button>
    <button class="btn" onclick="startGame()">Play</button>

    <div class="section">
      <h3>Support our socials</h3>
      <img src="turbotalesyt.png" alt="YouTube" class="social" />
      <img src="turbotalestt.png" alt="TikTok" class="social" />
    </div>
    <div id="message"></div>
  </div>

  <div id="carsMenu" class="menu">
    <h2>Velg en bil du eier:</h2>
    <div class="grid">
      <div class="card">
        <img src="basic_car.png" alt="Basic Car" />
        <p>Basic Racer<br>🚀 Speed: ★★☆☆☆</p>
      </div>
      <div class="card">
        <img src="speedster_car.png" alt="Speedster" />
        <p>Speedster<br>🚀 Speed: ★★★★☆</p>
      </div>
      <div class="card">
        <img src="turbo_car.png" alt="TurboTales EX" />
        <p>TurboTales EX<br>💎 Kun for abonnenter</p>
      </div>
    </div>
    <button class="btn" onclick="showMenu('main')">Tilbake</button>
  </div>

  <div id="tracksMenu" class="menu">
    <h2>Velg en bane:</h2>
    <div class="grid">
      <div class="card">
        <img src="track_forest.png" alt="Forest Loop" />
        <p>🌲 Forest Loop</p>
      </div>
      <div class="card">
        <img src="track_city.png" alt="City Rush" />
        <p>🌆 City Rush</p>
      </div>
      <div class="card">
        <img src="track_mountain.png" alt="Mountain Pass" />
        <p>⛰️ Mountain Pass</p>
      </div>
      <div class="card">
        <img src="track_desert.png" alt="Desert Drift" />
        <p>🏜️ Desert Drift</p>
      </div>
      <div class="card">
        <img src="track_ice.png" alt="Ice Arena" />
        <p>❄️ Ice Arena</p>
      </div>
      <div class="card">
        <img src="track_stadium.png" alt="Turbo Stadium" />
        <p>🏟️ Turbo Stadium</p>
      </div>
    </div>
    <button class="btn" onclick="showMenu('main')">Tilbake</button>
  </div>

  <canvas id="gameCanvas" width="800" height="400"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    let gameRunning = false;
    let player = { x: 100, y: 200, color: "cyan", speed: 2 };
    let bots = [];
    let score = 0;

    function showMenu(menu) {
      document.querySelectorAll('.menu').forEach(m => m.classList.remove('active'));
      document.getElementById(menu + 'Menu').classList.add('active');
    }

    function startGame() {
      document.querySelectorAll('.menu').forEach(m => m.classList.remove('active'));
      canvas.style.display = 'block';
      initGame();
      requestAnimationFrame(gameLoop);
    }

    function initGame() {
      gameRunning = true;
      bots = [];
      for (let i = 0; i < 9; i++) {
        bots.push({ x: 100, y: 40 * i + 20, color: "red", speed: 1.5 + Math.random() });
      }
      score = 0;
    }

    function drawCar(car) {
      ctx.fillStyle = car.color;
      ctx.fillRect(car.x, car.y, 40, 20);
    }

    function updateGame() {
      player.x += player.speed;
      bots.forEach(bot => bot.x += bot.speed);
      score++;
    }

    function drawGame() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawCar(player);
      bots.forEach(drawCar);
      ctx.fillStyle = "white";
      ctx.fillText("Poeng: " + score, 10, 20);
    }

    function gameLoop() {
      if (!gameRunning) return;
      updateGame();
      drawGame();
      requestAnimationFrame(gameLoop);
    }
  </script>

</body>
</html>
