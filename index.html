<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  canvas.setAttribute("tabindex", "0");
  canvas.focus();

  let x = 400, y = 300, angle = 0;
  let speed = 0, score = 0;
  const keys = {};

  canvas.addEventListener("keydown", e => keys[e.key] = true);
  canvas.addEventListener("keyup", e => keys[e.key] = false);

  function gameLoop() {
    ctx.fillStyle = "#222";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    if (keys["ArrowUp"]) speed += 0.2;
    if (keys["ArrowDown"]) speed -= 0.2;
    if (keys["ArrowLeft"]) angle -= 0.05;
    if (keys["ArrowRight"]) angle += 0.05;

    speed *= 0.95;
    x += Math.cos(angle) * speed;
    y += Math.sin(angle) * speed;

    score += Math.abs(speed * 0.1);
    document.getElementById("score").textContent = Math.floor(score);

    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(angle);
    ctx.fillStyle = "#0ff";
    ctx.fillRect(-20, -10, 40, 20);
    ctx.restore();

    requestAnimationFrame(gameLoop);
  }

  canvas.focus(); // dette gjør at det fungerer uten å måtte klikke
  gameLoop();
</script>
